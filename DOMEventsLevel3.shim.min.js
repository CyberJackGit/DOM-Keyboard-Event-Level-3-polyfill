/* MIT License (c) copyright Egor Halimonenko (termi1uc1@gmail.com) */
;(function(e){
var d=void 0,f=!0,h=!1,i;try{i="key"in new window.KeyboardEvent("keyup")}catch(aa){i=h}
if(!i){var l=window,v=function(a,c){var b;try{b=document.createEvent("KeyboardEvent")}catch(g){b=document.createEvent("Event")}var c=c||{},j={},k;for(k in o)p(o,k)&&(j[k]=k in c&&c[k]!==d?c[k]:o[k]);var e=j.ctrlKey,m=j.shiftKey,n=j.altKey,E=j.metaKey,R=(e&&"Control"+m&&" Shift"+n&&" Alt"+E&&" Meta"||"").trim(),B=j.key,$=j["char"],S=j.location,t=B&&B.charCodeAt(0)||0,x=j.bubbles,y=j.cancelable,H=h,t=j.keyCode=j.keyCode||t;j.which=j.which||t;q||(b.__keyCode=t);if("initKeyEvent"in b)b.initKeyEvent(a,
x,y,l,e,n,m,E,t,t),H=f;else if("initKeyboardEvent"in b&&r)try{1==s?b.initKeyboardEvent(a,x,y,l,B,S,e,m,n,E,h):2==s?b.initKeyboardEvent(a,x,y,l,B,R,t,j.repeat,j.locale):3==s?b.initKeyboardEvent(a,x,y,l,e,m,n,E,t,t):b.initKeyboardEvent(a,x,y,l,$,B,S,R,j.repeat,j.locale),H=f}catch(ga){r=h}H||b.initEvent(a,x,y,l);for(k in o)p(o,k)&&b[k]!=j[k]&&(delete b[k],u(b,k,{writable:f,value:j[k]}));"isTrusted"in b||(b.j=h);return b},ba=function(a){var c=a.which||a.keyCode,b=this.h,g=b._||(b._={});a.ctrlKey||a.altKey||
c in w&&0!==w[c].a||a.__key?(g._noneed=f,c=this.g,"function"!==typeof c&&"handleEvent"in c&&(b=c,c=c.handleEvent),c.apply(b,arguments)):(g._noneed=h,g._h_9e2__keyCode=c,"keyLocation"in a&&(g._keyLocation=a.f))},da=function(a){var c,b=this._,g;a.__stopNow||(b&&"_h_9e2__keyCode"in b?(c=b._h_9e2__keyCode,delete b._h_9e2__keyCode,z&&(c in w&&w[c].d)&&(c=w[c].d),"keyLocation"in a&&"_keyLocation"in b&&(delete a.f,a.f=b._keyLocation),g=new v("keydown",a),delete g.which,delete g.keyCode,delete g.keyLocation,
delete g.__location,u(g,"which",{value:c}),u(g,"keyCode",{value:c}),q||(g.__keyCode=c),g.__location=A.call(g),C||(b=w[c]||(b=w[c]={}),a.shiftKey?b.e=g["char"]:b.b=g["char"],b.a=0),c=!this.dispatchEvent(g)):(c=a.keyCode,c=(b=w[c])&&1<("object"==typeof b?b.a||"":b).length),c&&(a.preventDefault(),ca?a.stopImmediatePropagation():(a.__stopNow=f,a.stopPropagation())))},D=1,F=2,G=3,I=4,J=5,w={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",
21:"KanaMode",22:"HangulMode",23:"JunjaMode",24:"FinalMode",25:"HanjaMode",27:"Esc",28:"Convert",29:"Nonconvert",30:"Accept",31:"ModeChange",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",41:"Select",43:"Execute",44:"PrintScreen",45:"Insert",46:"Del",47:"Help",91:{a:"OS",b:h,c:D},92:{a:"OS",b:h,c:F},93:"Menu",106:{a:"Multiply",b:"*",c:G},107:{a:"Add",b:"+",c:G},108:{a:"Separator",b:h,c:G},109:{a:"Subtract",b:"-",c:G},110:{a:"Decimal",b:".",c:G},111:{a:"Divide",
b:"/",c:G},144:{a:"NumLock",b:h,c:G},145:"ScrollLock",180:"LaunchMail",181:"SelectMedia",182:"LaunchApplication1",183:"LaunchApplication2",224:"Meta",229:"Process",246:"Attn",247:"Crsel",248:"Exsel",249:"EraseEof",251:"Zoom",254:"Clear"},K=l.navigator.userAgent.toLowerCase(),L={},M,z;w[96]=w[97]=w[98]=w[99]=w[100]=w[101]=w[102]=w[103]=w[104]=w[105]={a:0,c:G};for(M=135;111<M;--M)w[M]="F"+(M-111);if(l.opera)z=f,w[57351]=w[93],w[61]={a:0,d:187},w[109]={a:0,d:189,c:3};else{L.names=K.match(/(mozilla|compatible|chrome|webkit|safari)/gi);
for(M=L.names&&L.names.length||0;0<M--;)L[L.names[M]]=f;L.mozilla&&(!L.compatible&&!L.webkit)&&(z=f,L.i=+(K.match(/firefox\/([0-9]+)/)||[])[1],w[61]={a:0,b:"=",e:"+",d:187},15>L.i&&(w[107]=w[61],w[109]={a:0,b:"-",e:"_",d:189}))}var N={"U+0008":d,"U+0009":d,"U+0020":d,"U+007F":d,Escape:d,Win:d,Scroll:d,Apps:d,"U+0010":d,"U+001C":d,"U+001D":d,"U+001E":d,"U+001F":d,Window:d,ContextMenu:d,Mul:d},ea=l.Event.prototype,O=l.KeyboardEvent&&l.KeyboardEvent.prototype||ea,C,P,Q,T,u=Object.defineProperty,U=Object.getOwnPropertyDescriptor,
V={keydown:d,keyup:d,keypress:d},fa=1,o={"char":"",key:"",location:0,ctrlKey:h,shiftKey:h,altKey:h,metaKey:h,repeat:h,locale:"",detail:0,bubbles:h,cancelable:h},ca="stopImmediatePropagation"in document.createEvent("Event"),W=Array.prototype.slice,X=Function.prototype.bind||function(a,c){var b=this,g=W.call(arguments,1);return function(){return b.apply(a,g.concat(W.call(arguments)))}},p=X.call(Function.prototype.call,Object.prototype.hasOwnProperty),r=f,A,s;a:{var Y=document.createEvent("KeyboardEvent");
try{Y.initKeyboardEvent("keyup",h,h,l,"+",3,f,h,h,h,h);s=(Y.keyIdentifier||"+"==Y.key&&Y.keyLocation||3==Y.location)&&(Y.ctrlKey?1:Y.shiftKey?3:2);break a}catch(ha){}s=d}var q,Z;U&&(Z={},C=(U(O,"key")||Z).get,P=(U(O,"char")||Z).get,Q=(U(O,"location")||Z).get,T=(U(O,"keyCode")||Z).get);v.DOM_KEY_LOCATION_STANDARD=0;v.DOM_KEY_LOCATION_LEFT=D;v.DOM_KEY_LOCATION_RIGHT=F;v.DOM_KEY_LOCATION_NUMPAD=G;v.DOM_KEY_LOCATION_MOBILE=I;v.DOM_KEY_LOCATION_JOYSTICK=J;v.prototype=O;Z=new v("keyup");delete Z.keyCode;
u(Z,"keyCode",{writable:f,value:9});!(q=9==Z.keyCode)&&T?(u(O,"keyCode",{enumerable:f,configurable:f,get:function(){return"__keyCode"in this?this.__keyCode:T.call(this)},set:function(a){return this.__keyCode=isNaN(a)?0:a}}),u(O,"charCode",{enumerable:f,configurable:f,get:function(){return"__charCode"in this?this.__charCode:T.call(this)},set:function(a){return this.__charCode=isNaN(a)?0:a}})):T=d;u(O,"key",{enumerable:f,configurable:f,get:function(){if(C){this.__key=f;return C.call(this)}if("__key"in
this)return this.__key;if(this instanceof v||this.type in V){var a=this.which||this.keyCode,c=this.type!="keypress";if("keyIdentifier"in this&&this.keyIdentifier&&!(this.keyIdentifier in N)&&this.keyIdentifier.substring(0,2)!=="U+")a=this.keyIdentifier;else{a=c&&w[a];a=(typeof a=="object"?a.a:a)||this["char"]}return this.__key=a}}});u(O,"char",{enumerable:f,configurable:f,get:function(){var a;if(P&&(a=P.call(this))!==null)return this.__char=a;if("__char"in this)return this.__char;if(this instanceof
v||this.type in V){var c=this.which||this.keyCode,b=this.type!="keypress";a=b&&w[c];var g=typeof a=="object"&&(typeof a.b!="undefined"||typeof a.e!="undefined"),b=(b||g)&&!this.shiftKey;if(a&&(typeof a!=="object"||a.b===h))a="";else if(g)a=(b?a.b:a.e||a.b)||"";else if("keyIdentifier"in this&&this.keyIdentifier&&!(this.keyIdentifier in N)&&this.keyIdentifier.substring(0,2)!=="U+")a="";else{a=String.fromCharCode(c);b&&(a=a.toLowerCase())}return this.__char=a}}});A=function(){if(Q)return Q.call(this);
if("__location"in this)return this.__location;if(this instanceof v||this.type in V){var a=this.which||this.keyCode,c=this.type!="keypress";if("keyLocation"in this)a=this.keyLocation;else{a=c&&w[a];a=typeof a=="object"&&a.c||0}return this.__location=a}};u(O,"location",{enumerable:f,configurable:f,get:A});[l.HTMLDocument&&l.HTMLDocument.prototype||l.document,l.Window&&l.Window.prototype||l,Element.prototype].forEach(function(a){var c=a.addEventListener,b=a.removeEventListener;if(c){a.addEventListener=
function(a,b,k){var e,m,n;if(a==="keydown"){e="_e_8vj"+(k?"-":"")+a;m=e+(b._h_9e2||(b._h_9e2=++fa));n=e+"__count";if(!(e=this._))e=this._={};if(m in e)return;e[n]=(e[n]||0)+1;b=e[m]=X.call(ba,{g:b,h:this});e[n]==1&&c.call(this,"keypress",da,f)}return c.call(this,a,b,k)};if(b)a.removeEventListener=function(a,c,k){var e,m,n;if(a==="keydown"){e="_e_8vj"+(k?"-":"")+a;m=e+c._h_9e2;n=e+"__count";e=this._;if(m&&e&&e[n]){--e[n];(c=e[m])&&delete e[m]}}return b.call(this,a,c,k)}}});D=F=G=I=J=U=Z=d;l.KeyboardEvent=
v};
})();