/*
 MIT License (c) copyright Egor Halimonenko (termi1uc1@gmail.com) */
(function(e){try{return"key"in new e.KeyboardEvent("keyup")}catch(f){return!1}})(window)||function(e){function f(b,c){var a;try{a=document.createEvent("KeyboardEvent")}catch(d){a=document.createEvent("Event")}var c=c||{},h={},i;for(i in o)v(o,i)&&(h[i]=i in c&&void 0!==c[i]?c[i]:o[i]);var g=h.ctrlKey,f=h.shiftKey,w=h.altKey,k=h.metaKey,l=(""+g&&"Control"+f&&" Shift"+w&&" Alt"+k&&" Meta").trim(),j=h.key,n=h["char"],q=h.location,p=j&&j.charCodeAt(0)||0,r=h.bubbles,s=h.cancelable,t=!1,p=h.keyCode=h.keyCode||
p;h.which=h.which||p;if("initKeyEvent"in a)a.initKeyEvent(b,r,s,e,g,w,f,k,p,p),t=!0;else if("initKeyboardEvent"in a)try{a.initKeyboardEvent(b,r,s,e,n,j,q,l,h.repeat,""),t=!0}catch(u){}t||a.initEvent(b,r,s,e);for(i in o)v(o,i)&&_event[i]!=h[i]&&(delete _event[i],m(a,i,{value:h[i]}));"isTrusted"in a||(a.isTrusted=!1);return a}function u(b){var c=this._||(this._={});c._h_9e2__key=b.key;c._h_9e2__char=b["char"]}function x(b){var c=this._;"_h_9e2__key"in c&&(b.__key=c._h_9e2__key,delete c._h_9e2__key);
"_h_9e2__char"in c&&(b.__char=c._h_9e2__char,delete c._h_9e2__char)}function D(b){var c=b.which||b.keyCode,a=this._this;c in n||b.__key?(c=this._listener,"function"!==typeof c&&"handleEvent"in c&&(a=c,c=c.handleEvent),c.apply(a,arguments)):(a=a._||(a._={}),a._h_9e2__keyCode=c)}function E(b){var c,a=this._;a&&"_h_9e2__keyCode"in a&&(c=a._h_9e2__keyCode,delete a._h_9e2__keyCode,a=new f("keydown",b),delete a.which,delete a.keyCode,m(a,"which",{value:c}),m(a,"keyCode",{value:c}),this.dispatchEvent(a)||
b.preventDefault())}var k=1,l=2,d=3,y=4,z=5,n={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",21:"KanaMode",22:"HangulMode",23:"JunjaMode",24:"FinalMode",25:"HanjaMode",27:"Esc",28:"Convert",29:"Nonconvert",30:"Accept",31:"ModeChange",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",41:"Select",43:"Execute",44:"PrintScreen",45:"Insert",46:"Del",47:"Help",91:{_key:"OS",_char:!1,
_location:k},92:{_key:"OS",_char:!1,_location:l},93:"Menu",96:{_location:d},97:{_location:d},98:{_location:d},99:{_location:d},100:{_location:d},101:{_location:d},102:{_location:d},103:{_location:d},104:{_location:d},105:{_location:d},106:{_key:"Multiply",_char:!1,_location:d},107:{_key:"Add",_char:!1,_location:d},108:{_key:"Separator",_char:!1,_location:d},109:{_key:"Subtract",_char:!1,_location:d},110:{_key:"Decimal",_char:!1,_location:d},111:{_key:"Divide",_char:!1,_location:d},112:"F1",113:"F2",
114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:{_key:"NumLock",_location:d},145:"ScrollLock",160:{_key:"Shift",_location:k},161:{_key:"Shift",_location:l},162:{_key:"Control",_location:k},163:{_key:"Control",_location:l},164:{_key:"Alt",_location:k},165:{_key:"Alt",_location:l},180:"LaunchMail",181:"SelectMedia",182:"LaunchApplication1",
183:"LaunchApplication2",224:"Meta",229:"Process",246:"Attn",247:"Crsel",248:"Exsel",249:"EraseEof",251:"Zoom",254:"Clear"},A={"U+0008":void 0,"U+0009":void 0,"U+0020":void 0,"U+007F":void 0,Escape:void 0,Win:void 0,Scroll:void 0,Apps:void 0,Window:void 0,ContextMenu:void 0},j=e.Event.prototype,j=e.KeyboardEvent&&e.KeyboardEvent.prototype||j,m=Object.defineProperty,q={keydown:void 0,keyup:void 0,keypress:void 0},F=1,o={"char":"",key:"",location:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,repeat:!1,
locale:"",detail:null,bubbles:!1,cancelable:!1},B=Array.prototype.slice,C=Function.prototype.bind||function(b,c){var a=this,d=B.call(arguments,1);return function(){return a.apply(b,d.concat(B.call(arguments)))}},v=C.call(Function.prototype.call,Object.prototype.hasOwnProperty);f.DOM_KEY_LOCATION_STANDARD=0;f.DOM_KEY_LOCATION_LEFT=k;f.DOM_KEY_LOCATION_RIGHT=l;f.DOM_KEY_LOCATION_NUMPAD=d;f.DOM_KEY_LOCATION_MOBILE=y;f.DOM_KEY_LOCATION_JOYSTICK=z;f.prototype=j;m(j,"key",{enumerable:!0,configurable:!0,
get:function(){if("__key"in this)return this.__key;if(this instanceof f||this.type in q){var b=this.which||this.keyCode,c="keypress"!=this.type;"keyIdentifier"in this&&this.keyIdentifier&&!(this.keyIdentifier in A)&&"U+"!==this.keyIdentifier.substring(0,2)?b=this.keyIdentifier:(b=c&&n[b],b=("object"==typeof b?b._key:b)||this["char"]);return this.__key=b}}});m(j,"char",{enumerable:!0,configurable:!0,get:function(){if("__char"in this)return this.__char;if(this instanceof f||this.type in q){var b=this.which||
this.keyCode,c="keypress"!=this.type,a=c&&n[b],d="object"==typeof a&&("undefined"!=typeof a._char||"undefined"!=typeof a._charShifted),c=(c||d)&&!this.shiftKey;a&&("object"!==typeof a||!1===a._char)?a="":d?a=(c?a._char:a._charShifted)||"":"keyIdentifier"in this&&this.keyIdentifier&&!(this.keyIdentifier in A)&&"U+"!==this.keyIdentifier.substring(0,2)?a="":(a=String.fromCharCode(b),c&&(a=a.toLowerCase()));return this.__char=a}}});m(j,"location",{enumerable:!0,configurable:!0,get:function(){if("__location"in
this)return this.__location;if(this instanceof f||this.type in q){var b=this.which||this.keyCode,c="keypress"!=this.type;"keyLocation"in this?b=this.keyLocation:(b=c&&n[b],b="object"==typeof b&&b._location||0);return this.__location=b}}});[e.HTMLDocument&&e.HTMLDocument.prototype||e.document,e.Window&&e.Window.prototype||e,Element.prototype].forEach(function(b){var c=b.addEventListener,a=b.removeEventListener;c&&(b.addEventListener=function(a,b,d){var g,f,e;if("keydown"===a||"keyup"===a){g="_e_8vj"+
(d?"-":"")+a;f=g+(b._h_9e2||(b._h_9e2=++F));e=g+"__count";if(!(g=this._))g=this._={};if(f in g)return;g[e]=(g[e]||0)+1;"keydown"===a?(b=g[f]=C(D,{_listener:b,_this:this}),1==g[e]&&c.call(this,"keypress",E,!0)):"keyup"===a&&1==g[e]&&(c.call(this,"keypress",u,!0),c.call(this,"keyup",x,!0))}return c.call(this,a,b,d)},a&&(b.removeEventListener=function(b,c,d){var g,e,f;if("keydown"===b||"keyup"===b)g="_e_8vj"+(d?"-":"")+b,e=g+c._h_9e2,f=g+"__count",g=this._,e&&(g&&g[f])&&(--g[f],"keydown"===b?(c=g[e])&&
delete g[e]:"keyup"===b&&0==g[f]&&(a.call(this,"keypress",u,!0),a.call(this,"keyup",x,!0)));return a.call(this,b,c,d)}))});k=l=d=y=z=void 0;e.KeyboardEvent=f}(window);